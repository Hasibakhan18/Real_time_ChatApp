{"ast":null,"code":"import { GoogleAuthProvider, signInWithPopup, getAuth } from 'firebase/auth';\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, addDoc, serverTimestamp, onSnapshot, query, orderBy } from 'firebase/firestore';\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCdkXtibUpJxzMda8VC5QCLVPG4l4kqlQE\",\n  authDomain: \"chat-app-44f96.firebaseapp.com\",\n  projectId: \"chat-app-44f96\",\n  storageBucket: \"chat-app-44f96.appspot.com\",\n  messagingSenderId: \"713961132173\",\n  appId: \"1:713961132173:web:070545bdefac1f9da5d2c4\"\n};\n\n// Initialize Firebase\n//eslint-disable-next-line \nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nasync function loginWithGoogle() {\n  try {\n    const provider = new GoogleAuthProvider();\n    const auth = getAuth();\n    const {\n      user\n    } = await signInWithPopup(auth, provider);\n    return {\n      uid: user.uid,\n      displayName: user.displayName\n    };\n  } catch (error) {\n    if (error.code !== 'auth/cancelled-popup-request') {\n      console.error(error);\n    }\n    return null;\n  }\n}\nasync function sendMessage(roomId, user, text) {\n  try {\n    await addDoc(collection(db, 'chat-rooms', roomId, 'messages'), {\n      uid: user.uid,\n      displayName: user.displayName,\n      text: text.trim(),\n      timestamp: serverTimestamp()\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\nfunction getMessages(roomId, callback) {\n  return onSnapshot(query(collection(db, 'chat-rooms', roomId, 'messages'), orderBy('timestamp', 'asc')), querySnapshot => {\n    const messages = querySnapshot.docs.map(x => ({\n      id: x.id,\n      ...x.data()\n    }));\n    callback(messages);\n  });\n}\nexport { loginWithGoogle, sendMessage, getMessages };","map":{"version":3,"names":["GoogleAuthProvider","signInWithPopup","getAuth","initializeApp","getFirestore","collection","addDoc","serverTimestamp","onSnapshot","query","orderBy","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","loginWithGoogle","provider","auth","user","uid","displayName","error","code","console","sendMessage","roomId","text","trim","timestamp","getMessages","callback","querySnapshot","messages","docs","map","x","id","data"],"sources":["/Users/mazharkhan/Desktop/chat-app/vibe-chat/src/services/firebase.js"],"sourcesContent":["\nimport { GoogleAuthProvider, signInWithPopup, getAuth } from 'firebase/auth';\nimport { initializeApp } from \"firebase/app\";\nimport {\n    getFirestore,\n    collection,\n    addDoc,\n    serverTimestamp,\n    onSnapshot,\n    query,\n    orderBy,\n} from 'firebase/firestore';\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCdkXtibUpJxzMda8VC5QCLVPG4l4kqlQE\",\n  authDomain: \"chat-app-44f96.firebaseapp.com\",\n  projectId: \"chat-app-44f96\",\n  storageBucket: \"chat-app-44f96.appspot.com\",\n  messagingSenderId: \"713961132173\",\n  appId: \"1:713961132173:web:070545bdefac1f9da5d2c4\"\n};\n\n// Initialize Firebase\n//eslint-disable-next-line \nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\n\nasync function loginWithGoogle() {\n    try {\n        const provider = new GoogleAuthProvider();\n        const auth = getAuth();\n\n        const { user } = await signInWithPopup(auth, provider);\n\n        return { uid: user.uid, displayName: user.displayName };\n    } catch (error) {\n        if (error.code !== 'auth/cancelled-popup-request') {\n            console.error(error);\n        }\n        return null;\n    }\n}\n\nasync function sendMessage(roomId, user, text) {\n    try {\n        await addDoc(collection(db, 'chat-rooms', roomId, 'messages'), {\n            uid: user.uid,\n            displayName: user.displayName,\n            text: text.trim(),\n            timestamp: serverTimestamp(),\n        });\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nfunction getMessages(roomId, callback) {\n    return onSnapshot(\n        query(\n            collection(db, 'chat-rooms', roomId, 'messages'),\n            orderBy('timestamp', 'asc')\n        ),\n        (querySnapshot) => {\n            const messages = querySnapshot.docs.map((x) => ({\n                id: x.id,\n                ...x.data(),\n            }));\n\n            callback(messages);\n        }\n    );\n}\n\nexport { loginWithGoogle , sendMessage ,getMessages};"],"mappings":"AACA,SAASA,kBAAkB,EAAEC,eAAe,EAAEC,OAAO,QAAQ,eAAe;AAC5E,SAASC,aAAa,QAAQ,cAAc;AAC5C,SACIC,YAAY,EACZC,UAAU,EACVC,MAAM,EACNC,eAAe,EACfC,UAAU,EACVC,KAAK,EACLC,OAAO,QACJ,oBAAoB;;AAE3B;AACA;;AAEA;AACA,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,gCAAgC;EAC5CC,SAAS,EAAE,gBAAgB;EAC3BC,aAAa,EAAE,4BAA4B;EAC3CC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE;AACT,CAAC;;AAED;AACA;AACA,MAAMC,GAAG,GAAGf,aAAa,CAACQ,cAAc,CAAC;AACzC,MAAMQ,EAAE,GAAGf,YAAY,CAACc,GAAG,CAAC;AAG5B,eAAeE,eAAeA,CAAA,EAAG;EAC7B,IAAI;IACA,MAAMC,QAAQ,GAAG,IAAIrB,kBAAkB,EAAE;IACzC,MAAMsB,IAAI,GAAGpB,OAAO,EAAE;IAEtB,MAAM;MAAEqB;IAAK,CAAC,GAAG,MAAMtB,eAAe,CAACqB,IAAI,EAAED,QAAQ,CAAC;IAEtD,OAAO;MAAEG,GAAG,EAAED,IAAI,CAACC,GAAG;MAAEC,WAAW,EAAEF,IAAI,CAACE;IAAY,CAAC;EAC3D,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ,IAAIA,KAAK,CAACC,IAAI,KAAK,8BAA8B,EAAE;MAC/CC,OAAO,CAACF,KAAK,CAACA,KAAK,CAAC;IACxB;IACA,OAAO,IAAI;EACf;AACJ;AAEA,eAAeG,WAAWA,CAACC,MAAM,EAAEP,IAAI,EAAEQ,IAAI,EAAE;EAC3C,IAAI;IACA,MAAMzB,MAAM,CAACD,UAAU,CAACc,EAAE,EAAE,YAAY,EAAEW,MAAM,EAAE,UAAU,CAAC,EAAE;MAC3DN,GAAG,EAAED,IAAI,CAACC,GAAG;MACbC,WAAW,EAAEF,IAAI,CAACE,WAAW;MAC7BM,IAAI,EAAEA,IAAI,CAACC,IAAI,EAAE;MACjBC,SAAS,EAAE1B,eAAe;IAC9B,CAAC,CAAC;EACN,CAAC,CAAC,OAAOmB,KAAK,EAAE;IACZE,OAAO,CAACF,KAAK,CAACA,KAAK,CAAC;EACxB;AACJ;AAEA,SAASQ,WAAWA,CAACJ,MAAM,EAAEK,QAAQ,EAAE;EACnC,OAAO3B,UAAU,CACbC,KAAK,CACDJ,UAAU,CAACc,EAAE,EAAE,YAAY,EAAEW,MAAM,EAAE,UAAU,CAAC,EAChDpB,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,CAC9B,EACA0B,aAAa,IAAK;IACf,MAAMC,QAAQ,GAAGD,aAAa,CAACE,IAAI,CAACC,GAAG,CAAEC,CAAC,KAAM;MAC5CC,EAAE,EAAED,CAAC,CAACC,EAAE;MACR,GAAGD,CAAC,CAACE,IAAI;IACb,CAAC,CAAC,CAAC;IAEHP,QAAQ,CAACE,QAAQ,CAAC;EACtB,CAAC,CACJ;AACL;AAEA,SAASjB,eAAe,EAAGS,WAAW,EAAEK,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}