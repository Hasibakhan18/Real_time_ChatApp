{"ast":null,"code":"import { getFirestore, collection, addDoc, serverTimestamp, onSnapshot, query, orderBy } from 'firebase/firestore';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCdkXtibUpJxzMda8VC5QCLVPG4l4kqlQE\",\n  authDomain: \"chat-app-44f96.firebaseapp.com\",\n  projectId: \"chat-app-44f96\",\n  storageBucket: \"chat-app-44f96.appspot.com\",\n  messagingSenderId: \"713961132173\",\n  appId: \"1:713961132173:web:070545bdefac1f9da5d2c4\"\n};\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nasync function loginWithGoogle() {\n  try {\n    const provider = new GoogleAuthProvider();\n    const auth = getAuth();\n    const {\n      user\n    } = await signInWithPopup(auth, provider);\n    return {\n      uid: user.uid,\n      displayName: user.displayName\n    };\n  } catch (error) {\n    if (error.code !== 'auth/cancelled-popup-request') {\n      console.error(error);\n    }\n    return null;\n  }\n}\nasync function sendMessage(roomId, user, text) {\n  try {\n    await addDoc(collection(db, 'chat-rooms', roomId, 'messages'), {\n      uid: user.uid,\n      displayName: user.displayName,\n      text: text.trim(),\n      timestamp: serverTimestamp()\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\nfunction getMessages(roomId, callback) {\n  return onSnapshot(query(collection(db, 'chat-rooms', roomId, 'messages'), orderBy('timestamp', 'asc')), querySnapshot => {\n    const messages = querySnapshot.docs.map(x => ({\n      id: x.id,\n      ...x.data()\n    }));\n    callback(messages);\n  });\n}\nexport { loginWithGoogle, sendMessage, getMessages };","map":{"version":3,"names":["getFirestore","collection","addDoc","serverTimestamp","onSnapshot","query","orderBy","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","initializeApp","db","loginWithGoogle","provider","GoogleAuthProvider","auth","getAuth","user","signInWithPopup","uid","displayName","error","code","console","sendMessage","roomId","text","trim","timestamp","getMessages","callback","querySnapshot","messages","docs","map","x","id","data"],"sources":["/Users/mazharkhan/Desktop/chat-app/vibe-chat/src/services/firebase.js"],"sourcesContent":["import {\n    getFirestore,\n    collection,\n    addDoc,\n    serverTimestamp,\n    onSnapshot,\n    query,\n    orderBy,\n} from 'firebase/firestore';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCdkXtibUpJxzMda8VC5QCLVPG4l4kqlQE\",\n    authDomain: \"chat-app-44f96.firebaseapp.com\",\n    projectId: \"chat-app-44f96\",\n    storageBucket: \"chat-app-44f96.appspot.com\",\n    messagingSenderId: \"713961132173\",\n    appId: \"1:713961132173:web:070545bdefac1f9da5d2c4\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nasync function loginWithGoogle() {\n    try {\n        const provider = new GoogleAuthProvider();\n        const auth = getAuth();\n\n        const { user } = await signInWithPopup(auth, provider);\n\n        return { uid: user.uid, displayName: user.displayName };\n    } catch (error) {\n        if (error.code !== 'auth/cancelled-popup-request') {\n            console.error(error);\n        }\n        return null;\n    }\n}\n\nasync function sendMessage(roomId, user, text) {\n    try {\n        await addDoc(collection(db, 'chat-rooms', roomId, 'messages'), {\n            uid: user.uid,\n            displayName: user.displayName,\n            text: text.trim(),\n            timestamp: serverTimestamp(),\n        });\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nfunction getMessages(roomId, callback) {\n    return onSnapshot(\n        query(\n            collection(db, 'chat-rooms', roomId, 'messages'),\n            orderBy('timestamp', 'asc')\n        ),\n        (querySnapshot) => {\n            const messages = querySnapshot.docs.map((x) => ({\n                id: x.id,\n                ...x.data(),\n            }));\n\n            callback(messages);\n        }\n    );\n}\n\nexport { loginWithGoogle, sendMessage, getMessages };"],"mappings":"AAAA,SACIA,YAAY,EACZC,UAAU,EACVC,MAAM,EACNC,eAAe,EACfC,UAAU,EACVC,KAAK,EACLC,OAAO,QACJ,oBAAoB;AAE3B,MAAMC,cAAc,GAAG;EACnBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,gCAAgC;EAC5CC,SAAS,EAAE,gBAAgB;EAC3BC,aAAa,EAAE,4BAA4B;EAC3CC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE;AACX,CAAC;AAED,MAAMC,GAAG,GAAGC,aAAa,CAACR,cAAc,CAAC;AACzC,MAAMS,EAAE,GAAGhB,YAAY,CAACc,GAAG,CAAC;AAE5B,eAAeG,eAAeA,CAAA,EAAG;EAC7B,IAAI;IACA,MAAMC,QAAQ,GAAG,IAAIC,kBAAkB,EAAE;IACzC,MAAMC,IAAI,GAAGC,OAAO,EAAE;IAEtB,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMC,eAAe,CAACH,IAAI,EAAEF,QAAQ,CAAC;IAEtD,OAAO;MAAEM,GAAG,EAAEF,IAAI,CAACE,GAAG;MAAEC,WAAW,EAAEH,IAAI,CAACG;IAAY,CAAC;EAC3D,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ,IAAIA,KAAK,CAACC,IAAI,KAAK,8BAA8B,EAAE;MAC/CC,OAAO,CAACF,KAAK,CAACA,KAAK,CAAC;IACxB;IACA,OAAO,IAAI;EACf;AACJ;AAEA,eAAeG,WAAWA,CAACC,MAAM,EAAER,IAAI,EAAES,IAAI,EAAE;EAC3C,IAAI;IACA,MAAM7B,MAAM,CAACD,UAAU,CAACe,EAAE,EAAE,YAAY,EAAEc,MAAM,EAAE,UAAU,CAAC,EAAE;MAC3DN,GAAG,EAAEF,IAAI,CAACE,GAAG;MACbC,WAAW,EAAEH,IAAI,CAACG,WAAW;MAC7BM,IAAI,EAAEA,IAAI,CAACC,IAAI,EAAE;MACjBC,SAAS,EAAE9B,eAAe;IAC9B,CAAC,CAAC;EACN,CAAC,CAAC,OAAOuB,KAAK,EAAE;IACZE,OAAO,CAACF,KAAK,CAACA,KAAK,CAAC;EACxB;AACJ;AAEA,SAASQ,WAAWA,CAACJ,MAAM,EAAEK,QAAQ,EAAE;EACnC,OAAO/B,UAAU,CACbC,KAAK,CACDJ,UAAU,CAACe,EAAE,EAAE,YAAY,EAAEc,MAAM,EAAE,UAAU,CAAC,EAChDxB,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,CAC9B,EACA8B,aAAa,IAAK;IACf,MAAMC,QAAQ,GAAGD,aAAa,CAACE,IAAI,CAACC,GAAG,CAAEC,CAAC,KAAM;MAC5CC,EAAE,EAAED,CAAC,CAACC,EAAE;MACR,GAAGD,CAAC,CAACE,IAAI;IACb,CAAC,CAAC,CAAC;IAEHP,QAAQ,CAACE,QAAQ,CAAC;EACtB,CAAC,CACJ;AACL;AAEA,SAASpB,eAAe,EAAEY,WAAW,EAAEK,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}